# ============================================================
# SFA-Routing Service - Environment Configuration
# ============================================================
# Скопируйте этот файл в .env и настройте для вашего окружения
# Copy this file to .env and configure for your environment
# ============================================================

# ------------------------------------------------------------
# ENVIRONMENT / ОКРУЖЕНИЕ
# ------------------------------------------------------------
ENVIRONMENT=development  # development, staging, production

# ------------------------------------------------------------
# POSTGRESQL DATABASE / БАЗА ДАННЫХ
# ------------------------------------------------------------
POSTGRES_USER=routeuser
POSTGRES_PASSWORD=CHANGE_ME_strong_password_32_chars
POSTGRES_DB=routes
POSTGRES_HOST=db
POSTGRES_PORT=5432

# Connection pool settings (production)
# DB_POOL_SIZE=20
# DB_MAX_OVERFLOW=30

# ------------------------------------------------------------
# REDIS CACHE / КЭШ
# ------------------------------------------------------------
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=
# REDIS_DB=0

# ------------------------------------------------------------
# SECURITY KEYS / КЛЮЧИ БЕЗОПАСНОСТИ
# ------------------------------------------------------------
# ВАЖНО: Сгенерируйте уникальные ключи для production!
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(64))"

SECRET_KEY=CHANGE_ME_generate_64_char_secret_key
WEBHOOK_SECRET_KEY=CHANGE_ME_generate_32_char_webhook_key
GEO_ENCRYPTION_KEY=CHANGE_ME_generate_32_char_geo_key

# ------------------------------------------------------------
# EXTERNAL SERVICES / ВНЕШНИЕ СЕРВИСЫ
# ------------------------------------------------------------
# OSRM - Distance Matrix Service
OSRM_URL=http://osrm:5000

# VROOM - VRP Solver
VROOM_URL=http://vroom:3000

# ------------------------------------------------------------
# API SETTINGS / НАСТРОЙКИ API
# ------------------------------------------------------------
API_HOST=0.0.0.0
API_PORT=8000
DEBUG=false

# CORS Origins (comma-separated)
CORS_ORIGINS=http://localhost:3000,http://localhost:8080

# Rate Limiting
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_BURST=10

# ------------------------------------------------------------
# OBSERVABILITY / МОНИТОРИНГ
# ------------------------------------------------------------
# Sentry Error Tracking (optional)
# SENTRY_DSN=https://xxx@sentry.io/xxx

# Log Level
LOG_LEVEL=INFO

# ------------------------------------------------------------
# CELERY BACKGROUND TASKS / ФОНОВЫЕ ЗАДАЧИ
# ------------------------------------------------------------
CELERY_BROKER_URL=redis://redis:6379/0
CELERY_RESULT_BACKEND=redis://redis:6379/1

# ------------------------------------------------------------
# DOCKER COMPOSE PROFILES
# ------------------------------------------------------------
# Используйте профили для включения дополнительных сервисов:
# docker compose --profile with-osrm up
# docker compose --profile monitoring up
COMPOSE_PROFILES=

# ============================================================
# PRODUCTION CHECKLIST / ЧЕКЛИСТ ДЛЯ PRODUCTION
# ============================================================
# [ ] Сгенерированы уникальные SECRET_KEY, WEBHOOK_SECRET_KEY, GEO_ENCRYPTION_KEY
# [ ] Установлен надёжный POSTGRES_PASSWORD (32+ символов)
# [ ] ENVIRONMENT=production
# [ ] DEBUG=false
# [ ] Настроен SENTRY_DSN для отслеживания ошибок
# [ ] SSL сертификаты размещены в docker/nginx/ssl/
# [ ] Настроены CORS_ORIGINS для production доменов
# [ ] Проверены URL внешних сервисов (OSRM_URL, VROOM_URL)
